{% extends 'client/layouts.html' %}
{% load static %}

{% block title %}
<title>Movies Recomm | Homepage </title>
{% endblock %}

{% block main_content %}
<!-- carousel -->
<div class="container-fluid">

    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel"
        style="max-height: 500px;overflow:hidden;">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{% static 'images/banner_theDarkKnight.jpg' %}" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block text-start">
                    <h2>The Dark Knight</h2>
                    <p>Some representative placeholder content for the first slide.</p>
                </div>

            </div>
            <div class="carousel-item">
                <img src="{% static 'images/banner_infinityWar.jpg' %}" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block text-start">
                    <h2>Avengers: Infinity War</h2>
                    <p>Some representative placeholder content for the first slide.</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="{% static 'images/banner_starWars.jpg' %}" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block text-start">
                    <h2>Star Wars</h2>
                    <p>Some representative placeholder content for the first slide.</p>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
            data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
            data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</div>

<!-- carousel -->


<!-- movies available -->
<div class="container mt-3 ">
    <h2 class="text-muted text-center p-2">New Releases</h2>
    <div class="row row-cols-1 row-cols-md-4 g-4 m-3">
        {% for movie in movies %}
        <div class="col ">
            <a href="{% url 'movie-detail' movie.id %}" class="text-decoration-none">
                <div class="card movie-card">
                    <div class="card-header p-2">

                        <img src="/{{ movie.image }}" class="card-img-top" alt="{{ movie.movieTitle }}" height="280">
                    </div>
                    <div class="card-body">
                        <h5 class="card-title"><strong>{{ movie.movieTitle }}</strong></h5>
                        <p class="card-text"><small class="text-body-secondary">Released:
                                {{movie.movieReleaseDate}}</small>
                        </p>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
    <div class="text-center">
        <a href="{% url 'movies-list' %}" class="btn btn-success text-center rounded-pill m-2">View More</a>
    </div>
</div>
<!-- movies available -->

<!-- latest reviews -->
{% if reviews %}
<div class="container mt-3">

    <h2 class="text-center">Latest Reviews</h2>

    {% for review in reviews %}
    <div class="card my-2">
        <div class="card-header">
            <strong>
                <a href="{% url 'movie-detail' review.movie.id %}" class="text-decoration-none">
                    {{ review.movie.movieTitle }}</a>
            </strong>
            <br>
            <strong>
                Rating: {{ review.rating }}
            </strong>
            &lpar;
            {% for i in "12345" %}
            {% if forloop.counter <= review.rating %} <i class='bx bx-star'></i>
                {% endif %}
                {% endfor %}
                &rpar;

        </div>
        <div class="card-body">
            <blockquote class="blockquote mb-0">
                <p>{{ review.review_text }}</p>
                <footer class="blockquote-footer">{{ review.user.username }} </footer>
            </blockquote>
            <em>{{ review.created_at }}</em>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="card">
        <p>No reviews yet. Be the first one to review!</p>
    </div>
</div>
{% endif %}
<!-- latest reviews end -->


{% endblock %}